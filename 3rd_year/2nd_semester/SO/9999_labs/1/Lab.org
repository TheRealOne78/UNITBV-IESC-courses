#+TITLE: N11 - teme lab01
#+AUTHOR: BAJCSI Elias-Robert
#+DATE: 2026-02-16 Mon
#+INCLUDE: ../config.org

* Listati continutul directoarelor /, /bin, /usr, /etc, /usr/include. Acolo unde este cazul, paginati listarea (ls | less). cautati, in fisierul /usr/include/stdio.h, textul printf.
** List
#+BEGIN_SRC sh
ls /
ls /bin | less
ls /usr
ls /etc | less
ls /usr/include | less
#+END_SRC

[[./Pics/1.png]]

** Concat
#+BEGIN_SRC sh
cat /usr/include/stdio.h | grep " printf "
#+END_SRC

[[./Pics/2.png]]

* Creati, in directorul personal, urmatoarea structura de directoare si fisiere:
#+BEGIN_SRC
(dir. personal)
|
+-- abc
| +-- x (fisier)
| +-- y (fisier)
| +-- t1 (fisier)
| +-- t2 (fisier)
| +-- t3 (fisier)
| +-- t (director)
| +-- a (fisier)
| +-- b (fisier)
|
+-- zz (director)
| +-- x (fisier)
|
+-- tt (director)
#+END_SRC

#+BEGIN_SRC sh
mkdir -p abc/t zz/x tt

cd ./abc; touch x y t{1..3} a b; cd ..
#+END_SRC

[[./Pics/3.png]]

* Copiati directorul abc cu tot continutul sau (recursiv) ca subdirector al lui zz (va rezulta un subdirector abc in zz)
#+BEGIN_SRC sh
cp -r ./abc ./zz
#+END_SRC

[[./Pics/4.png]]


* Copiati continutul lui abc in directorul zz fara a suprascrie fisierele cu acelasi nume (x, in cazul nostru) 
#+BEGIN_SRC sh
cp --update=none -r ./abc/* ./zz
#+END_SRC

[[./Pics/5.png]]


* copiati fisierele t1 si t2 din abc in tt (folosind specificator generic) 
#+BEGIN_SRC sh
cp ./abc/t{1..2} tt
#+END_SRC

[[./Pics/6.png]]


* Creati un director pe care sa va dati dreptul x fara a avea dreptul r. Creati in el un fisier. Ce observati? Dati-va apoi dreptul r si luati-va dreptul x. Ce observati ?
** Execute, no read
#+BEGIN_SRC sh
mkdir -m 300 foo
touch foo/bar
#+END_SRC
Pot crea fișiere în directorul respectiv (deoarece în acest caz, mi-am dat și permisiunea de scriere [write]), însă nu pot lista fișierele.

[[./Pics/7.1.png]]

** Read, no execute
#+BEGIN_SRC sh
chmod 600 foo
#+END_SRC
Acum nu mai am cum să schimb directorul în "$(pwd)/foo", și nu am cum sa creez conținut în el, deoarece drepturile de execuție în directorul respectiv îmi sunt blocate.

[[./Pics/7.2.png]]

* Dati drepturile potrivite astfel incat oricine sa poata vizualiza continutul directoarelor abc si abc/t, sa poata adauga fisiere in abc/t, sa poata citi fisierele x, y, t1, t2, t3 din abc dar sa nu poata citi fisierele a si b din abc/t 
#+BEGIN_SRC sh
chmod a+rx abc abc/t
chmod a+w abc/t

for f in x y t{1..3}; do
    chmod a+r "abc/${f}"
done

for f in a b; do
    chmod a-r "abc/t/${f}"
done
#+END_SRC

[[./Pics/8.1.png]]

[[./Pics/8.2.png]]


* Listati in format lung fisierele t, t1, t2, t3 din abc (sa se vada drepturile de acces asupra lui t, nu asupra fisierelor din el
#+BEGIN_SRC sh
ls -l "abc/t"
ls -l "abc/t{1..3}"
#+END_SRC

[[./Pics/9.png]]

* Comanda copy /dev/zero /dev/null este un fel de 'ciclu infinit' (nu se termina). Lansati-o, mutati-o in background, listati procesele active, terminati comanda (in ambele variante: mutata in foreground si oprita cu ^C, sau cu kill). 

#+BEGIN_SRC sh
cp /dev/zero /dev/null &
ps -aux | grep "cp /dev/zero /dev/null"

# First variant
fg
#C c

# Re-run
cp /dev/zero /dev/null &
kill $! # Kill last process ID
#+END_SRC

[[./Pics/10.png]]

* Arhivati structura de directoare folosind utilitarul zip sau utilitarele tar si gz.
** Zip
#+BEGIN_SRC sh
zip -r structure.zip src
#+END_SRC

** GNU Tar + GNU Zip

#+BEGIN_SRC sh
tar -cpzH posix -f structure.tar.gz src  --atime-preserve

# Or pipe
tar -cpH posix src --atime-preserve | gzip > structure2.tar.gz
#+END_SRC

** Screenshot
[[./Pics/11.png]]

* Stergeti directoarele si refaceti structura pornind de la arhiva. Verificati conservarea datei creerii si drepturilor de acces.
** Remove dirs
#+BEGIN_SRC sh
for f in $(find src); do
    stat "${f}" >> old.txt
done

rm -rf src
#+END_SRC

** Unarchive
*** ZIP
#+BEGIN_SRC sh
unzip structure.zip
#+END_SRC

*** GNU Tar + GNU Zip
#+BEGIN_SRC sh
tar -xzf structure.tar.gz

# Or pipe
gunzip -c structure.tar.gz | tar -xf -
#+END_SRC

** Verify
#+BEGIN_SRC sh
for f in $(find src); do
    stat "${f}" >> new.txt
done

diff new.txt old.txt
#+END_SRC

** Screenshot
[[./Pics/12.png]]
